/*!
 * created by cloud_cb linyunbin on 2017/11/13
 * lsk-mobile v0.0.1
 * Copyright  2017, cloud_cb linyunbin, ISC license
 */
webpackJsonp([25],{37:function(e,t){},71:function(e,t,a){"use strict";var n=a(2),s=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(1),o=a(3);a(0),a(37),a(7);var c=a(6).pullUpLoad;!function(){function e(){(0,o.myProductBuys)(f,function(t){console.log("我的求购列表-求购中",t);for(var a=t.data.list,n="",o=0;o<a.length;o++){var l=document.createElement("div");l.setAttribute("data-id",a[o].id),l.className="info-wrapper",n='<div class="info">\n                        <img src="'+a[o].buyPicUrl+'">\n                        <div class="text">\n                            <div class="top ellipsis-two">'+a[o].buyDesc+'</div>\n                            <div class="bottom"><span class="order-taking-num" style="display: '+(a[o].buyTaskCount?"block":"none")+'">已有<span class="num">'+a[o].buyTaskCount+'</span>人接单</span><span class="time">'+(0,i.getDateDiff)(new Date(a[o].createDate))+"</span></div>\n                        </div>\n                    </div>",l.innerHTML=n,l.onclick=function(){var e=this.getAttribute("data-id");console.log(e),s.default.info("请前往App查看",1e3),p.style.display="block"},d.insertBefore(l,document.querySelector(".going-flag"))}var u=t.data.pageNO<t.data.totalPage;console.log("hasMore值:",u),u&&f.pageNo++,c(u,e,d)})}function t(){(0,o.myProductBuys)(v,function(e){console.log("我的求购列表-已完成",e);for(var a=e.data.list,n="",o=0;o<a.length;o++){var u=document.createElement("div"),d=a[o].dealBuyTask?a[o].dealBuyTask.companyId:"";u.setAttribute("data-id",a[o].id),u.className="info-wrapper",n='<div class="info border-bottom">\n                    <img src="'+a[o].buyPicUrl+'">\n                    <div class="text">\n                        <div class="top ellipsis-two">'+a[o].buyDesc+'</div>\n                        <div class="bottom"><span class="order-taking-num">已有<span class="num">'+a[o].buyTaskCount+'</span>人接单</span><span class="time">'+(0,i.getDateDiff)(new Date(a[o].createDate))+'</span></div>\n                    </div>\n                </div>\n                <div class="btn">\n                    <span class="republish" buy-desc="'+a[o].buyDesc+'" buy-num="'+a[o].buyNum+'" buy-pic-url="'+a[o].buyPicUrl+'" buy-shapes="'+a[o].buyShape+'" buy-type="'+a[o].buyType+'" buy-unit="'+a[o].buyUnit+'" is-start-up="'+a[o].isStartUp+'">重新发布</span><span class="active contact-merchant" company-id="'+(a[o].dealBuyTask?a[o].dealBuyTask.companyId:"")+'">联系商家</span>\n                </div>',u.innerHTML=n,u.onclick=function(){s.default.info("请前往App查看",1e3),p.style.display="block"},y.insertBefore(u,document.querySelector(".complete-flag"));var b=u.getElementsByClassName("republish")[0],g=u.getElementsByClassName("contact-merchant")[0];r(d,g),b.onclick=function(e){l(this),e.stopPropagation()},g.onclick=function(e){e.stopPropagation(),this.getAttribute("phone")?location.href="tel:"+this.getAttribute("phone"):s.default.info("您完成接单时未选择联系人")}}var m=e.data.pageNO<e.data.totalPage;m&&v.pageNo++,c(m,t,y)})}function a(){(0,o.myProductBuys)(h,function(e){console.log("我的求购列表-已关闭",e);for(var t=e.data.list,n="",o=0;o<t.length;o++){var r=document.createElement("div");r.setAttribute("data-id",t[o].id),r.className="info-wrapper",n='<div class="info border-bottom">\n                    <img src="'+t[o].buyPicUrl+'">\n                    <div class="text">\n                        <div class="top ellipsis-two">'+t[o].buyDesc+'</div>\n                        <div class="bottom"><span class="time">'+(0,i.getDateDiff)(new Date(t[o].createDate))+'</span></div>\n                    </div>\n                </div>\n                <div class="btn">\n                    <span class="active republish" buy-desc="'+t[o].buyDesc+'" buy-num="'+t[o].buyNum+'" buy-pic-url="'+t[o].buyPicUrl+'" buy-shapes="'+t[o].buyShape+'" buy-type="'+t[o].buyType+'" buy-unit="'+t[o].buyUnit+'" is-start-up="'+t[o].isStartUp+'">重新发布</span><span class="del" buying-id="'+t[o].id+'">删除</span>\n                </div>',r.innerHTML=n,r.onclick=function(){var e=this.getAttribute("data-id");console.log(e),s.default.info("前往App查看",1e3),p.style.display="block"},b.insertBefore(r,document.querySelector(".close-flag"));var y=r.getElementsByClassName("republish")[0],g=r.getElementsByClassName("del")[0];y.onclick=function(e){l(this),e.stopPropagation()},g.onclick=function(e){u(this),e.stopPropagation()}}var m=e.data.pageNO<e.data.totalPage;m&&h.pageNo++,c(m,a,d)})}function n(e){for(var t=0;t<g.length;t++)g[t].className=g[t].className.replace("active","");g[e.activeIndex].className+=" active",history.replaceState(null,null,"?swiperIndex="+e.activeIndex)}function l(e){location.href="./publish_buy.html?buyDesc="+e.getAttribute("buy-desc")+"&buyNum="+e.getAttribute("buy-num")+"&buyPicUrl="+e.getAttribute("buy-pic-url")+"&buyShapes="+e.getAttribute("buy-shapes")+"&buyType="+e.getAttribute("buy-type")+"&buyUnit="+e.getAttribute("buy-unit")+"&isStartUp="+e.getAttribute("is-start-up")+"&from="+location.href}function u(e){var t={ids:Number(e.getAttribute("buying-id"))};console.log(t),console.log("删除求购ID值",t),confirm("确认删除?")&&(0,o.deleteProductBuy)(t,function(t){if(console.log(t),0===t.code){s.default.success(t.messge);var a=e.parentElement.parentElement;a.parentElement.removeChild(a),console.log(e.parentElement.parentElement)}else s.default.info(t.messge)})}function r(e,t){e&&(0,o.getCompanyInfo)({companyId:e},function(e){console.log("获取详细工厂信息",e),t.setAttribute("phone",e.data.phone)})}var p=(0,i.c)("#foot"),d=(0,i.c)("#goingWrapper"),y=(0,i.c)("#completeWrapper"),b=(0,i.c)("#closeWrapper"),g=(0,i.c)(".swiper-tag")[0].getElementsByTagName("span"),m=new Swiper(".swiper-container",{onSlideChangeEnd:n,spaceBetween:30,initialSlide:(0,i.getQueryString)("swiperIndex")?(0,i.getQueryString)("swiperIndex"):0}),f={buyStatus:1,buyType:"",pageNo:1,pageSize:10},v={buyStatus:2,buyType:"",pageNo:1,pageSize:10},h={buyStatus:3,buyType:"",pageNo:1,pageSize:10};e(),t(),a(),function(){for(var e=0;e<g.length;e++)!function(e){g[e].addEventListener("click",function(){m.slideTo(e,300,!1),n(m)},!1)}(e)}()}()}},[71]);