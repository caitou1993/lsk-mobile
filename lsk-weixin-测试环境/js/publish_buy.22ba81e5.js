/*!
 * created by cloud_cb linyunbin on 2017/11/13
 * lsk-mobile v0.0.1
 * Copyright  2017, cloud_cb linyunbin, ISC license
 */
webpackJsonp([18],{45:function(e,t){},79:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(5),c=a(i),s=n(2),l=a(s),r=n(1),u=n(9),o=n(3);n(0),n(45),function(){function e(e){var a=document.createElement("div");a.className="item";var i="";i='<img src="'+e+'"><span class="icon-close pic-close"></span>',a.innerHTML=i,C.insertBefore(a,q),t(),n(),a.getElementsByClassName("pic-close")[0].addEventListener("click",function(e){e.cancelBubble=!0,e.stopPropagation(),this.parentElement.parentElement.removeChild(this.parentElement);for(var a=0;a<W.length;a++)if(W[a]===this.previousElementSibling.getAttribute("src")){W.splice(a,1);break}console.log("imgArr删除后剩余值",W),I.reset(),t(),n()})}function t(){W.length>0?q.style.display="none":q.style.display="block"}function n(){var e=document.querySelectorAll(".upload-image-wrapper")[0].querySelectorAll("item");Array.prototype.forEach.call(e,function(e){e.onclick=function(){c.default.previewImage({current:this.getElementsByTagName("img")[0].getAttribute("src"),urls:W})}})}function a(e){for(var t=0;t<e.length;t++)e[t].onclick=function(){for(var t=0;t<e.length;t++)e[t].className=e[t].className.replace(" active","");this.className+=" active"}}function i(){return J.buyPicUrl?J.buyType?J.buyShapes?J.isStartUp?J.buyDesc||l.default.info("请填写求购描述"):l.default.info("请勾选接受开机项"):l.default.info("请填写求购形态"):l.default.info("请填写求购类型"):l.default.info("请上传图片"),""!==J.buyPicUrl&&""!==J.buyType&&""!==J.buyShapes&&""!==J.buyDesc&&""!==J.isStartUp}function s(e){return/^(1|2|3|4)[0]{3}[1](0|1|2|3)$/.test(e||"")?e:""}var p=(0,r.c)("#mask"),m=(0,r.c)(".pop-show-bar"),y=(0,r.c)(".pop-up-wrapper"),g=(0,r.c)(".pop-confirm"),f=(0,r.c)(".pop-close"),b=(0,r.c)("#typeBtnWrapper"),d=(0,r.c)("#shapeBtnWrapper"),v=(0,r.c)("#BtnWrapper"),h=(0,r.c)("#numIpt"),N=(0,r.c)("#descIpt"),S=b.getElementsByTagName("span"),T=d.getElementsByTagName("span"),k=v.getElementsByTagName("span"),L=(0,r.c)("#select").getElementsByTagName("i"),E=(0,r.c)("#buyType"),B=(0,r.c)("#buyShape"),U=(0,r.c)("#buyNum"),A=(0,r.getQueryString)("buyDesc"),M=(0,r.getQueryString)("buyPicUrl"),H=(0,r.getQueryString)("isStartUp"),x=s((0,r.getQueryString)("buyShapes")),P=s((0,r.getQueryString)("buyNum")),Q=s((0,r.getQueryString)("buyType")),D=s((0,r.getQueryString)("buyUnit")),w=(0,r.getQueryString)("from"),W=[],C=(0,r.c)("#uploadWrapper"),I=(0,r.c)("#imgForm"),_=(0,r.c)("#inputPic"),q=(0,r.c)("#upload"),F=(0,r.c)("#publish"),J=((0,r.c)("#cropperWrapper"),(0,r.c)("#cropperImage"),{buyPicUrl:"",buyDesc:"",buyNum:"",buyShapes:"",buyType:"",buyUnit:"",isStartUp:""});if(w){var $=function(e,t){var n=String(t)[5];n&&(e[n].className="active selected")};$(S,Q),$(T,x),P&&$(k,D),L[Number(!Number(H))].className="icon-gou active selected",E.innerHTML=(0,r.formatSupplyType)(Q),B.innerHTML=(0,r.formatProduceShape)(x),P&&D&&(U.innerHTML=P+(0,r.formatUnit)(D)),N.value=A,h.value=P,M&&(W.push(M),e(M))}(0,r.checkAndroid)()&&_.setAttribute("captrue","camera"),q.onclick=function(){_.click()},_.onchange=function(){l.default.loading("正在上传.."),u.aliupload.call(this,4,function(t){console.log("图片上传返回值",t),l.default.hide(),W.push(t[0]),e(t[0])},function(e){l.default.error("图片上传失败，请重试")})};for(var j=0;j<m.length;j++)m[j].index=j,m[j].onclick=function(){y[this.index].style.display="block",p.style.display="block"};for(var z=0;z<f.length;z++)f[z].index=z,f[z].onclick=function(){y[this.index].style.display="none",p.style.display="none";for(var e=y[this.index].getElementsByClassName("btn")[0].getElementsByTagName("span"),t=0;t<e.length;t++)e[t].classList.contains("selected")?e[t].className="selected active":e[t].className=""};for(var G=0;G<g.length;G++)g[G].index=G,g[G].onclick=function(){y[this.index].style.display="none",p.style.display="none";var e=y[this.index].getElementsByClassName("btn")[0].getElementsByTagName("span");if(h.value)for(var t=h.value,n=0;n<k.length;n++){if(k[n].classList.contains("active")){h.value=t;break}h.value=""}for(var a=0;a<e.length;a++)if(e[a].classList.contains("active")){if("1"===e[a].getAttribute("item-id")[0]&&(e[a].className="selected active",E.innerHTML=e[a].innerHTML),"2"===e[a].getAttribute("item-id")[0]&&(e[a].className="selected active",B.innerHTML=e[a].innerHTML),"4"===e[a].getAttribute("item-id")[0])if(h.value)e[a].className="selected active",U.innerHTML=h.value+" "+e[a].innerHTML;else{h.value="";for(var i=0;i<e.length;i++)e[i].className="",U.innerHTML="请选择数量"}}else e[a].className=""};a(S),a(T),a(k);for(var K=0;K<L.length;K++)L[K].onclick=function(){for(var e=0;e<L.length;e++)L[e].className="icon-gou";this.className="icon-gou active selected"};F.onclick=function(){J.buyPicUrl=W[0]?W[0]:"",J.buyNum=Number(h.value)?Number(h.value):"",J.buyDesc=N.value;for(var e=0;e<S.length;e++){if(S[e].classList.contains("selected")){J.buyType=Number(S[e].getAttribute("item-id"));break}J.buyType=""}for(var t=0;t<T.length;t++){if(T[t].classList.contains("selected")){J.buyShapes=T[t].getAttribute("item-id");break}J.buyShapes=""}for(var n=0;n<k.length;n++){if(k[n].classList.contains("selected")){J.buyUnit=Number(k[n].getAttribute("item-id"));break}J.buyUnit=""}for(var a=0;a<L.length;a++){if(L[a].classList.contains("selected")){J.isStartUp=Number(L[a].getAttribute("star-up-st"));break}J.isStartUp=""}console.log("发布求购Data:",J),console.log("check",i()),i()&&(0,o.releaseProductBuy)(J,function(e){console.log(e),0===e.code?l.default.success({text:e.message,duration:1e3,complete:function(){location.href="./publish_buy_tip.html"}}):l.default.info(e.message)})}}()}},[79]);