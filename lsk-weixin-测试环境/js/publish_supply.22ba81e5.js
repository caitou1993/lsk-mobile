/*!
 * created by cloud_cb linyunbin on 2017/11/13
 * lsk-mobile v0.0.1
 * Copyright  2017, cloud_cb linyunbin, ISC license
 */
webpackJsonp([16],{47:function(e,t){},81:function(e,t,l){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=l(5),a=s(n),i=l(2),c=s(i),p=l(1),r=l(9),o=l(3);l(0),l(47),function(){function e(e){var s=document.createElement("div");s.className="item";var n="";n='<img src="'+e+'"><span class="icon-close pic-close"></span>',s.innerHTML=n,S.insertBefore(s,H),t(),l(),s.getElementsByClassName("pic-close")[0].addEventListener("click",function(e){e.cancelBubble=!0,e.stopPropagation(),this.parentElement.parentElement.removeChild(this.parentElement);for(var s=0;s<B.length;s++)if(B[s]===this.previousElementSibling.getAttribute("src")){B.splice(s,1);break}console.log("imgArr删除后剩余值",B),x.reset(),t(),l()})}function t(){B.length>0?H.style.display="none":H.style.display="block"}function l(){var e=document.querySelectorAll(".upload-image-wrapper")[0].querySelectorAll("item");Array.prototype.forEach.call(e,function(e){e.onclick=function(){a.default.previewImage({current:this.getElementsByTagName("img")[0].getAttribute("src"),urls:B})}})}function s(e){for(var t=0;t<e.length;t++)e[t].onclick=function(){for(var t=0;t<e.length;t++)e[t].className=e[t].className.replace(" active","");this.className+=" active"}}function n(){return P.supplyPicUrl?P.supplyType?P.supplyShapes?P.supplyDesc||c.default.info("请填写供应描述"):c.default.info("请填写供应形态"):c.default.info("请填写供应类型"):c.default.info("请上传图片"),""!==P.supplyPicUrl&&""!==P.supplyType&&""!==P.supplyShapes&&""!==P.supplyDesc}var i=(0,p.c)("#mask"),u=(0,p.c)(".pop-show-bar"),m=(0,p.c)(".pop-up-wrapper"),f=(0,p.c)(".pop-confirm"),y=(0,p.c)(".pop-close"),d=(0,p.c)("#typeBtnWrapper"),g=(0,p.c)("#shapeBtnWrapper"),h=(0,p.c)("#BtnWrapper"),v=(0,p.c)("#numIpt"),b=(0,p.c)("#descIpt"),N=d.getElementsByTagName("span"),k=g.getElementsByTagName("span"),T=h.getElementsByTagName("span"),E=(0,p.c)("#supplyType"),L=(0,p.c)("#supplyShape"),A=(0,p.c)("#supplyNum"),B=[],S=(0,p.c)("#uploadWrapper"),x=(0,p.c)("#imgForm"),M=(0,p.c)("#inputPic"),H=(0,p.c)("#upload"),U=(0,p.c)("#publish"),P=((0,p.c)("#cropperWrapper"),(0,p.c)("#cropperImage"),{supplyPicUrl:"",supplyDesc:"",supplyNum:"",supplyShapes:"",supplyType:"",supplyUnit:""});(0,p.checkAndroid)()&&M.setAttribute("captrue","camera"),H.onclick=function(){M.click()},M.onchange=function(){c.default.loading("正在上传.."),r.aliupload.call(this,4,function(t){console.log("图片上传返回值",t),c.default.hide(),B.push(t[0]),e(t[0])},function(e){c.default.error("图片上传失败，请重试")})};for(var w=0;w<u.length;w++)u[w].index=w,u[w].onclick=function(){m[this.index].style.display="block",i.style.display="block"};for(var C=0;C<y.length;C++)y[C].index=C,y[C].onclick=function(){m[this.index].style.display="none",i.style.display="none";for(var e=m[this.index].getElementsByClassName("btn")[0].getElementsByTagName("span"),t=0;t<e.length;t++)e[t].classList.contains("selected")?e[t].className="selected active":e[t].className=""};for(var D=0;D<f.length;D++)f[D].index=D,f[D].onclick=function(){m[this.index].style.display="none",i.style.display="none";var e=m[this.index].getElementsByClassName("btn")[0].getElementsByTagName("span");if(v.value)for(var t=v.value,l=0;l<T.length;l++){if(T[l].classList.contains("active")){v.value=t;break}v.value=""}for(var s=0;s<e.length;s++)if(e[s].classList.contains("active")){if("1"===e[s].getAttribute("item-id")[0]&&(e[s].className="selected active",E.innerHTML=e[s].innerHTML),"2"===e[s].getAttribute("item-id")[0]&&(e[s].className="selected active",L.innerHTML=e[s].innerHTML),"4"===e[s].getAttribute("item-id")[0])if(v.value)e[s].className="selected active",A.innerHTML=v.value+" "+e[s].innerHTML;else{v.value="";for(var n=0;n<e.length;n++)e[n].className="",A.innerHTML="请选择数量"}}else e[s].className=""};s(N),s(k),s(T),U.onclick=function(){P.supplyPicUrl=B[0]?B[0]:"",P.supplyNum=Number(v.value)?Number(v.value):"",P.supplyDesc=b.value;for(var e=0;e<N.length;e++){if(N[e].classList.contains("selected")){P.supplyType=Number(N[e].getAttribute("item-id"));break}P.supplyType=""}for(var t=0;t<k.length;t++){if(k[t].classList.contains("selected")){P.supplyShapes=k[t].getAttribute("item-id");break}P.supplyShapes=""}for(var l=0;l<T.length;l++){if(T[l].classList.contains("selected")){P.supplyUnit=Number(T[l].getAttribute("item-id"));break}P.supplyUnit=""}console.log("发布供应Data:",P),n()&&(0,o.releaseCompanySupply)(P,function(e){console.log(e),0===e.code?c.default.success({text:e.message,duration:1e3,complete:function(){location.href="./publish_supply_tip.html"}}):c.default.info(e.message)})}}()}},[81]);